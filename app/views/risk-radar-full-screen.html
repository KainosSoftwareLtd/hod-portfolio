{% extends "full-screen-layout.html" %} {% block content %}
    <div class="grid-row">

    <div class="column-two-thirds">
      <canvas id="riskRadar" width="1000" height="758" style="background-color:#ffffff">Bad times, browser doesn't support canvas. You can't see the radar.</canvas>
    </div>

    <div class="column-one-third">
      <h2 class="heading-large">Immediate</h2>
        <p>1. Someone has left the gas on and forgot about it.</p>
      <h2 class="heading-large">4 to 8 Weeks</h2>
        <p>2. 42 New people joining the project.</p>
        <p>3. Lots of Holidays this month.</p>
        <p>4. Node version goes out of LTS.</p>
      <h2 class="heading-large">8 Weeks +</h2>
        <p>5. Product Roadmap incomplete.</p>
        <p>6. Brand Relaunch.</p>
        <a class="font-xsmall link-back" href="/projects/{{ project.id }}/{{ project.name | slugify }}/risk-radar">back</a>
    </div>

  </div>

<script>
window.onload = function() {
  var canvas = document.getElementById('riskRadar');
  var ctx = canvas.getContext('2d');
  var height = 758;
  var width = 1000;

  drawMaintainAspectRectangle(ctx,height,width,0.9,'#cccccc');
  drawMaintainAspectRectangle(ctx,height,width,0.6,'#cccccc');
  drawMaintainAspectRectangle(ctx,height,width,0.3,'#666666');

  drawCrosshairs(ctx,height,width);
  drawQuadrants(ctx, height, width, 0.8);

  //Draw Risks Section by Section
  drawRisks(ctx, "1.1", [1],height,width,0.9,);
  drawRisks(ctx, "2.1", [2],height,width,0.9,);
  drawRisks(ctx, "2.2", [3],height,width,0.9,);
  drawRisks(ctx, "2.4", [4],height,width,0.9,);
  drawRisks(ctx, "3.3", [5,6],height,width,0.9,);
}

var drawRisks = function(ctx,section, numbers, height, width, percentage){
  console.log(numbers);
  switch (section) {
      case "1.1":
      y = 320;
      for (var i = 0; i < numbers.length; i++) {
        drawNumbers(ctx, 250, y, numbers[i]);
        y = y + 10;
      }
      case "3.3":
        y = 540;
        for (var i = 0; i < numbers.length; i++) {
          drawNumbers(ctx, 90, y, numbers[i]);
          y = y + 50;
        }
      break;
    default:

  }
}

var drawNumbers = function(ctx, x, y,number){
  var xOffset = x-6;
  var yOffset = y+7;

  ctx.beginPath();
  ctx.fillStyle = '#000000'
  ctx.arc(x, y, 15, 0, Math.PI * 2, true);  // Left eye
  ctx.fill();
  ctx.stroke();
  ctx.font = '24px nta, Arial, sans-serif';
  ctx.fillStyle = '#FFFFFF'
  ctx.fillText(number, xOffset, yOffset);
  ctx.closePath();
}

var drawQuadrants = function(ctx, height, width, percentage) {
  shapeWidth = width * percentage;
  shapeHeight = height * percentage;
  xPosition = (width - shapeWidth) / 2;
  yPosition = (height - shapeHeight) / 2;
  yBottomPosition = yPosition + shapeHeight;

  ctx.font = '24px nta, Arial, sans-serif';
  ctx.fillStyle = '#555555'
  ctx.fillText('Delivery', xPosition, yPosition);
  ctx.fillText('People', shapeWidth, yPosition );
  ctx.fillText('Product', xPosition, yBottomPosition);
  ctx.fillText('Technology', shapeWidth, yBottomPosition);
  ctx.closePath();
}

var drawMaintainAspectRectangle = function (ctx, height, width, percentage, color){
  ctx.strokeStyle = color;
  shapeWidth = width * percentage;
  shapeHeight = height * percentage;
  yPosition = (height - shapeHeight) / 2;
  xPosition = (width - shapeWidth) / 2;
  ctx.strokeRect(xPosition,yPosition,shapeWidth,shapeHeight);
}

var drawCrosshairs = function(ctx, height, width){
  ctx.beginPath();
  ctx.strokeStyle = '#000000'
  center = width / 2;
  middle = height /2;

  ctx.moveTo(0, middle);
  ctx.lineTo(width,middle);

  ctx.moveTo(center, 0);
  ctx.lineTo(center,height);

  ctx.stroke();
}
</script>
{% endblock %}
