{% extends "layout.html" %} {% block content %}
<main id="content" role="main">
    <div class="grid-row">
        <div class="column-two-thirds">
            <h1 class="heading-xlarge">{{ project.name }} Health <a class="font-xsmall" href="/projects/{{ project.id }}/{{ project.name | slugify }}/edit-health"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a></h1>
            <p>
                <a class="font-xsmall link-back" href="/projects/{{ project.id }}/{{ project.name | slugify }}/">Back</a>
            </p>
        </div>
    </div>
    <div class="grid-row">
        <div>
          {% set types = { "overall":{label: "Overall"}, "engineering": {label: "Engineering"}, "ops": {label: "Operations"}, "userResearch": {label: "User Research"}, "security": {label: "Security"}, "delivery": {label: "Delivery"}, "data": {label: "Data"} } %}
          {% for type, details in types %}
            {% if project.health[type] %}
              <a class="font-xsmall" href="/projects/{{ project.id }}/{{ project.name | slugify }}/display-health/#{{ details.label | title }}"><span class="health-block bold-xlarge {{ project.health[type].status | lower }}">{{ details.label | title }}</span></a>
            {% endif %}
          {% endfor %}
        </div>
    </div>
    <div class="grid-row">
        <div class="column-full">
            <h2 class="heading-large">Health details</h2>
            <table>
                <thead>
                    <tr>
                        <th colspan="2">&nbsp;</th>                        
                    </tr>
                </thead>
                {% set types = { "overall":{label: "Overall"}, "engineering": {label: "Engineering"}, "ops": {label: "Operations"}, "userResearch": {label: "User Research"}, "security": {label: "Security"}, "delivery": {label: "Delivery"}, "data": {label: "Data"} } %}
                {% for type, details in types %}
                  {% if project.health[type] %}
                <tr>
                    <td class="font-medium"><a name="{{ details.label | title }}"></a>
                      <span class="health-block-small {{ project.health[type].status | lower }}">{{ details.label | title }}</span></td>
                    <td>
                      <p>{{ project.health[type].user.name }} {% if project.health[type].date %}, {{ convertDate(project.health[type].date) }} {% endif %}</p>
                      {% if project.health[type].comment %}<p class="font-small">{{ project.health[type].comment }}</p>{% endif %}
                      <p class="font-xsmall">{% if project.health[type].link.url %}<a href="{{ project.health[type].link.url }}" target="_blank">{{ project.health[type].link.name }}</a> {% endif %} </p>
                    </td>
                </tr>
                {% endif %}
              {% endfor %}
            </table>
        </div>
        <div class="grid-row">
            <div class="column-two-thirds">
              &nbsp;
              <p><a class="bold-xsmall" href="/projects/{{ project.id }}/{{ project.name | slugify }}/display-health-history">Previous Updates</a></p>
            </div>
        </div>
    </div>
</main>
{% endblock %}
